<p class="text-xl font-semibold mb-4">Alle deine Nachrichten</p>

<div class="space-y-4">
  @for (notification of notifications(); track notification.id) {
    @if (
      auth.getCurrentUserId() == notification.receiver.id &&
      auth.getCurrentUserRole() == 'geber' &&
      notification.status == 'pending'
      ) {
      <div class="bg-white rounded-2xl shadow-md p-6 transition hover:shadow-lg border border-gray-200">
        <h3 class="text-lg font-bold text-gray-800 mb-2">
          Neue Anfrage von: <span class="text-blue-600">{{ notification.sender.name }}</span>
        </h3>
        <p class="text-gray-700 mb-1">
          Für das Angebot <span class="font-medium">{{ notification.offer.name }}</span>
        </p>
        <p class="text-gray-600 mb-1">
          Gewünschter Termin:
          <span class="font-medium text-gray-800">{{ notification.requested_time | date: 'fullDate' }}</span>
          um
          <span class="font-medium text-gray-800">{{ notification.requested_time | date: 'shortTime' }}</span>
        </p>
        @if (notification.message) {
          <p class="text-gray-700 italic mb-2">Nachricht: {{ notification.message }}</p>
        }

        <div class="flex space-x-3 mt-4">
          <button
            (click)="rejectAppointment(notification.id)"
            class="bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded-lg shadow-sm transition"
          >
            Anfrage ablehnen
          </button>
          <button
            (click)="acceptAppointment(notification.id)"
            class="bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded-lg shadow-sm transition"
          >
            Anfrage annehmen
          </button>
        </div>
      </div>
    }
  }
</div>

@if (notifications().length === 0) {
  <p class="text-gray-500 text-sm italic">Keine Nachrichten vorhanden</p>
}
